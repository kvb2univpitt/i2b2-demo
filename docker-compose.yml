services:
  i2b2-data-demo:
    image: kvb2univpitt/i2b2-data-demo-postgresql:v1.8.1.2024.06
    environment:
      - POSTGRESQL_ADMIN_PASSWORD=demouser
    container_name: i2b2-data-demo
    networks:
      - i2b2-demo-net
    ports:
      - 5432:5432
  i2b2-core-server-demo:
    image: kvb2univpitt/i2b2-core-server-demo-postgresql:v1.8.1.2024.06
    container_name: i2b2-core-server-demo
    networks:
      - i2b2-demo-net
    depends_on:
      - i2b2-data-demo
    ports:
      - 9090:9090
  i2b2-webclient-demo:
    image: kvb2univpitt/i2b2-webclient-demo:v1.8.1.2024.06
    container_name: i2b2-webclient-demo
    networks:
      - i2b2-demo-net
    depends_on:
      - i2b2-core-server-demo
    ports:
      - 80:80
      - 443:443
  i2b2-idp-demo:
    image: kvb2univpitt/i2b2-idp-demo:v1.7.13.2022.06
    environment:
      - SIMPLESAMLPHP_ADMIN_PASSWORD=demouser
    container_name: i2b2-idp-demo
    networks:
      - i2b2-demo-net
    ports:
      - 8080:8080
      - 8443:8443

networks:
  i2b2-demo-net:
    name: i2b2-demo-net
    driver: bridge
    external: true
